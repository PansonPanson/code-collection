## CSAPP漫游记004：存储器层次结构

作为一个程序员，我们需要理解存储器层次结构，因为它对应用程序的性能有着巨大的影响。如果你的程序需要的数据是存储在CPU寄存器中的，那么在指令的执行期间，在40个周期内就能访问到它们。如果存储在告诉缓存中，需要4~75个周期。如果存储在主内存中，需要上百个周期。而如果存储在磁盘上，需要大约几千万个周期。

### 存储器

**[随机访问存储器](https://zh.wikipedia.org/wiki/%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%AD%98%E5%82%A8%E5%99%A8)：**

+ [静态RAM](https://zh.wikipedia.org/wiki/%E9%9D%99%E6%80%81%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%AD%98%E5%82%A8%E5%99%A8)
+ [动态RAM](https://zh.wikipedia.org/wiki/%E5%8A%A8%E6%80%81%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%AD%98%E5%82%A8%E5%99%A8)

动态RAM和静态RAM在断电后会丢失信息，此时可以选用**非易失性存储器**，即使在断电后，非易失性存储器依然可以保存信息。

+ [可编程只读存储器](https://zh.wikipedia.org/wiki/PROM)
+ [可擦除可编程式只读存储器](https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%93%A6%E9%99%A4%E5%8F%AF%E8%A6%8F%E5%8A%83%E5%BC%8F%E5%94%AF%E8%AE%80%E8%A8%98%E6%86%B6%E9%AB%94)
+ [闪存](https://zh.wikipedia.org/wiki/%E9%97%AA%E5%AD%98)

 **磁盘存储**

+ [磁盘构造]()

### 局部性原理

在编写程序时，我们需要了解一个经典的计算机科学原理：**局部性原理**。具有良好局部性的程序倾向于一次又一次地访问相同的数据项集合，或是倾向于访问领近的数据项集合。具有良好局部性的程序倾向于从存储器层次结构中较高层次处访问数据项，因此运行得更快。

**局部性**包括两种不同的形式：时间局部性与空间局部性。

### 存储器层次结构

![](https://github.com/PansonPanson/code-collection/blob/master/image-hosting/csapp/%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.jpg?raw=true)

### 高速缓存：[参考](https://wdxtub.com/2016/04/16/thin-csapp-3/)

+ 直接映射高速缓存缓存
+ 组相联高速缓存
+ 全相联高速缓存

写命中的问题：

+ 直写
+ 写回

写不命中的问题：

+ 写分配
+ 非写分配

