异常是异常控制流的一种形式，它一部分由硬件实现，一部分由操作系统实现。异常发生在内核状态下，，这意味着它们对所有的系统资源都具有完全的访问权限。

异常可以分为4类：中断、陷阱、故障和终止。

| 类别 |       原因        | 异步/同步 |       返回行为       |
| :--: | :---------------: | :-------: | :------------------: |
| 中断 | 来自I/O设备的信号 |   异步    | 总是返回到下一条指令 |
| 陷阱 |    有意的异常     |   同步    | 总是返回到下一条指令 |
| 故障 | 潜在可恢复的错误  |   同步    |  可能返回到当前指令  |
| 终止 |  不可恢复的错误   |   同步    |       不会返回       |

陷阱、故障和终止是同步发生的，是执行当前指令的结果，我们把这类指令叫做故障指令。

陷阱最重要的用途是在用户程序和内核之间提供一个像过程一样的接口，叫做系统调用。

经典的故障就是缺页异常。当指令引用一个虚拟地址，而与该地址相对应的物理页面不在内存中，因此必须从磁盘中取出时，就会发生故障。

x86-64系统中的异常示例：

| 异常号 |        描述        |  异常类别  |
| :----: | :----------------: | :--------: |
|   0    |      除法异常      |    故障    |
|   13   |    一般保护错误    |    故障    |
|   14   |        缺页        |    故障    |
|   18   |      机器检查      |    终止    |
| 32~255 | 操作系统定义的异常 | 中断或陷阱 |

